2025-10-06 13:24:40,187 - embedding_engine - INFO - Loaded 0 embeddings from cache
2025-10-06 13:24:40,187 - embedding_engine - INFO - EmbeddingEngine initialized with model: nomic-embed-text
2025-10-06 13:24:40,210 - llm_classifier - INFO - Loaded 220 items from c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/data/cache/canonicals.pkl
2025-10-06 13:24:40,210 - llm_classifier - INFO - Loaded 0 items from c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/data/cache/llm_decisions.pkl
2025-10-06 13:24:40,210 - llm_classifier - INFO - LLMClassifier initialized with model: qwen3:14b
2025-10-06 13:24:40,210 - __main__ - INFO - TestRunner initialized
2025-10-06 13:24:40,210 - __main__ - INFO - Starting test run: 20251006_132440
2025-10-06 13:24:40,212 - __main__ - INFO - Loaded 542 interventions from database
2025-10-06 13:24:40,212 - __main__ - INFO - Processing interventions...
2025-10-06 13:24:40,212 - __main__ - INFO - Processed 50/542 interventions
2025-10-06 13:24:40,212 - __main__ - INFO - Processed 100/542 interventions
2025-10-06 13:24:40,212 - __main__ - INFO - Processed 150/542 interventions
2025-10-06 13:24:40,212 - __main__ - INFO - Processed 200/542 interventions
2025-10-06 13:33:21,146 - __main__ - INFO - Processed 250/542 interventions
2025-10-06 13:48:35,484 - __main__ - INFO - Processed 300/542 interventions
2025-10-06 14:03:26,272 - __main__ - INFO - Processed 350/542 interventions
2025-10-06 14:18:02,812 - __main__ - INFO - Processed 400/542 interventions
2025-10-06 14:32:31,396 - __main__ - INFO - Processed 450/542 interventions
2025-10-06 14:47:15,226 - __main__ - INFO - Processed 500/542 interventions
2025-10-06 14:59:46,542 - __main__ - INFO - Test results saved to: c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/results\test_run_20251006_132440.json

================================================================================
TEST RUN SUMMARY - 20251006_132440
================================================================================

--- PROCESSING STATS ---
Total interventions: 542
Unique canonical groups: 486
Average cluster size: 1.12

--- LLM USAGE ---
Canonical extractions (LLM): 542
Relationship classifications (LLM): 0
Canonical cache hit rate: 40.59%
Relationship cache hit rate: 0.00%

--- TOP 20 CANONICAL GROUPS (by member count) ---

1. proton pump inhibitors (6 members)
   - Proton pump inhibitors (PPIs)
   - omeprazole
   - proton pump inhibitors
   - proton pump inhibitors (PPIs)
   - tegoprazan-amoxicillin dual therapy
   ... and 1 more

2. probiotics (4 members)
   - Bifidobacterium animalis
   - multi-strain probiotics
   - probiotic supplementation
   - probiotics

3. janus kinase inhibitors (3 members)
   - Baricitinib
   - Janus kinase inhibitors (JAKi)
   - Tofacitinib

4. robot-assisted gait training (3 members)
   - Continuous robot-assisted gait training (RAGT)
   - Low-intensity interval robot-assisted gait training (LowRAGT)
   - Robot-assisted gait training (RAGT)

5. metformin (3 members)
   - Metformin
   - adjuvant metformin
   - metformin

6. statins (3 members)
   - atorvastatin
   - atorvastatin pretreatment
   - statin use

7. corticosteroids (3 members)
   - corticosteroids
   - dexamethasone
   - systemic corticosteroids

8. vitamin d (3 members)
   - high-dose vitamin D
   - vitamin D
   - vitamin D supplementation

9. acupuncture (2 members)
   - Acupuncture
   - auricular acupressure

10. cemiplimab (2 members)
   - Cemiplimab
   - cemiplimab

11. cetuximab (2 members)
   - Cetuximab
Traceback (most recent call last):
  File "C:\Users\samis\Desktop\MyBiome\back_end\experiments\semantic_normalization\test_runner.py", line 478, in <module>
    main()
    ~~~~^^
  File "C:\Users\samis\Desktop\MyBiome\back_end\experiments\semantic_normalization\test_runner.py", line 472, in main
    runner.print_summary(results)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\samis\Desktop\MyBiome\back_end\experiments\semantic_normalization\test_runner.py", line 363, in print_summary
    print(f"   - {member}")
    ~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u03b2' in position 15: character maps to <undefined>
2025-10-06 14:59:46,559 - embedding_engine - INFO - Saved 0 embeddings to cache
