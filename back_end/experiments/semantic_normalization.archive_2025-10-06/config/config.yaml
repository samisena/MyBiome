# Semantic Normalization Experiment Configuration

# Database
database:
  path: "c:/Users/samis/Desktop/MyBiome/back_end/data/processed/intervention_research.db"
  export_limit: 500  # Maximum interventions to export

# Data Export
export:
  min_frequency: 1  # Minimum occurrence count to include
  include_metadata: true
  output_dir: "c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/data/samples"

# Ground Truth Labeling
labeling:
  target_pairs: 500  # Target number of labeled pairs (updated for Phase 1)
  candidate_pool_size: 600  # Number of candidate pairs to generate
  similarity_threshold_min: 0.30  # Minimum similarity for candidates (lowered for DIFFERENT examples)
  similarity_threshold_max: 0.95  # Maximum similarity for candidates
  output_dir: "c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/data/ground_truth"

  # Hierarchical Relationship Types
  relationship_types:
    1:
      code: "EXACT_MATCH"
      display: "Exact Match (same intervention, same formulation)"
      description: "Identical interventions, including synonyms and equivalent names"
      aggregation: "merge_completely"
      examples:
        - "vitamin D = cholecalciferol"
        - "PPI = proton pump inhibitor"
    2:
      code: "VARIANT"
      display: "Variant (same concept, different formulation)"
      description: "Same therapeutic concept but different formulation or biosimilar"
      aggregation: "share_layer_1_link_layer_2"
      examples:
        - "Cetuximab vs Cetuximab-beta (biosimilar)"
        - "insulin glargine vs insulin detemir"
    3:
      code: "SUBTYPE"
      display: "Subtype (related but clinically distinct)"
      description: "Related subtypes of the same parent condition or intervention class"
      aggregation: "share_layer_1_separate_layer_2"
      examples:
        - "IBS-D vs IBS-C"
        - "type 1 diabetes vs type 2 diabetes"
    4:
      code: "SAME_CATEGORY"
      display: "Same Category (different entities in same class)"
      description: "Different members of the same intervention category"
      aggregation: "separate_all_layers"
      examples:
        - "L. reuteri vs S. boulardii (both probiotics)"
        - "atorvastatin vs simvastatin (both statins)"
    5:
      code: "DOSAGE_VARIANT"
      display: "Dosage Variant (same intervention, different dose)"
      description: "Same intervention with explicit dosage differences"
      aggregation: "share_layers_1_2"
      examples:
        - "metformin vs metformin 500mg"
        - "vitamin D 1000 IU vs vitamin D 5000 IU"
    6:
      code: "DIFFERENT"
      display: "Different (completely unrelated interventions)"
      description: "No relationship between interventions"
      aggregation: "no_relationship"
      examples:
        - "vitamin D vs chemotherapy"
        - "exercise vs surgery"

# Fuzzy Matching (for candidate generation)
fuzzy_matching:
  algorithm: "jaro_winkler"  # Options: levenshtein, jaro_winkler, token_sort
  score_threshold: 0.40  # Minimum score to consider as candidate

# Paths
paths:
  samples_dir: "c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/data/samples"
  ground_truth_dir: "c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/data/ground_truth"
  results_dir: "c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/results"
  logs_dir: "c:/Users/samis/Desktop/MyBiome/back_end/experiments/semantic_normalization/logs"

# Hierarchical Semantic Layers
hierarchy:
  # Layer 0: Intervention Category (from existing 13-category taxonomy)
  # Layer 1: Canonical Entity (semantic grouping - "probiotics", "statins", "IBS")
  # Layer 2: Specific Variant (exact entity - "L. reuteri", "atorvastatin", "IBS-D")
  # Layer 3: Dosage/Details (granular - "L. reuteri 10^9 CFU", "atorvastatin 20mg")

  similarity_thresholds:
    layer_0_category: 1.0      # Exact category match (from taxonomy)
    layer_1_canonical: 0.70    # Broad semantic grouping
    layer_2_variant: 0.90      # Specific entity matching
    layer_3_detail: 0.95       # Dosage/formulation exact match

  layer_definitions:
    layer_0:
      name: "Category"
      description: "Intervention category from taxonomy (supplement, medication, etc.)"
      source: "existing_intervention_categories_table"
    layer_1:
      name: "Canonical Entity"
      description: "Semantic group (probiotics, statins, cetuximab, IBS)"
      aggregation_level: "broad"
    layer_2:
      name: "Specific Variant"
      description: "Exact entity (L. reuteri, atorvastatin, cetuximab-Î², IBS-D)"
      aggregation_level: "specific"
    layer_3:
      name: "Dosage/Details"
      description: "Granular details (dosage, administration method)"
      aggregation_level: "granular"

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file_enabled: true
